# 查找结构问题
贡献者：何文轩
## 前言
在电控组调车的时候经常会遇到怎么都调不出来理想效果的问题，这种情况除了是电控没调好参数（~~我相信你，肯定不是你的问题~~），还有一个可能性是存在结构问题。但往往电控调车的时候你的结构不一定在你身边，所以每一个电控都应该学习一下如何查找自己车辆的结构问题。也希望大家不要啥问题都非得找结构，例如就一颗螺丝没扭紧就非要等结构来修，这样反而耽误自己调车的时间。当然，确认是结构问题时一定也要向自己结构反应，同时如果是原则性错误的话，需要上报给兵种负责人和结构组组长。下面介绍一下结构问题对电控调车存在的影响：
+ **影响电控调车的执行部件**
结构车的安装质量直接影响电控调车系统中执行部件的正常运行。例如，电机、传动带等执行部件如果安装不稳，可能会出现抖动、接触不良等问题，导致电控系统无法准确地控制车辆的运动，影响调车的精度和稳定性。
+ **影响电控调车的线路布置**
结构车的安装不当可能导致线路布置混乱，影响电控调车系统中信号的传输和控制。例如，线路被挤压、拉扯或损坏，可能导致信号传输不稳定，甚至出现短路、断路等问题，影响电控系统的正常运行。
+ **影响电控调车的控制精度**
结构车的安装位置和角度不准确，会影响电控调车系统中传感器和控制器的测量和控制精度。例如，传感器安装位置偏移，可能导致测量数据不准确，进而影响电控系统的控制决策，降低调车的精度。
+ **影响电控调车的系统稳定性**
结构车的安装不稳可能导致车辆在调车过程中出现晃动、震动等问题，影响电控调车系统的稳定性。例如，车辆重心偏移或力学平衡破坏，可能导致电控系统难以维持车辆的稳定状态，增加车辆失控的风险。
+ **影响电控调车的系统响应速度**
结构车的安装不当可能导致电控调车系统中各部件之间的连接不稳定，增加系统的检测和调整时间，从而影响系统的响应速度。例如，连接器松动或线路接触不良，可能导致信号传输延迟，影响电控系统的实时控制能力。

本文将从以上几个方面详细介绍嵌入式组的同学如何验收车辆以及遇到问题时及时排查是否存在结构问题
## 问题一：螺丝松动导致抖动
### 问题描述
+ **高频抖动**
PID调参过程中，给的参数很小电机也会存在高频抖动
+ **控制精度下降**
电机始终很难转到目标角度，或者向不同方向转动时稳定误差有明显差异，或者角度环给了很大的I（因为角度环主要是PD控制，有I的情况下I的值应该也很小才对）
+ **系统稳定性降低**
电机很容易受到外界干扰的影响，导致系统稳定性降低，出现控制不稳定、振荡加剧等问题。
### 问题出现原因
+ **电机安装不稳**
螺丝没拧紧会使电机在运行时产生振动和抖动，这些机械振动会通过电机的安装结构传递到电控系统。例如，电机安装在底座上，如果螺丝松动，电机在运行时会晃动，导致电机的输出轴与负载之间的连接出现松动，进而影响电控系统的稳定性和控制精度。   
+ **传动部件松动**
如果电机与负载之间的联轴器、齿轮、皮带等传动部件的连接螺丝没拧紧，会导致传动部件在运行时出现松动和摆动，从而引起电机的负载波动和振动。这种振动会通过机械结构传递到电控系统，影响传感器的测量精度和电控系统的稳定性
### 如何排查
1. **观察螺丝松动**
直接观察电机和相关机械部件的螺丝，如果发现螺丝有松动迹象，如螺丝与螺母之间有明显间隙，或者螺丝头部可以轻易转动，这可能是电机抖动的原因之一。
2. **检查安装基础**
检查电机的安装基础是否牢固。如果安装基础不平或刚度不够，会导致电机在运行时产生振动和抖动。例如，电机底座的螺丝松动或底座本身变形，会使电机在运行时晃动，进而引起抖动。
**检查联轴器和传动部件**
检查电机与负载之间的联轴器、齿轮、皮带等传动部件的连接情况。如果这些部件的螺丝松动，会导致传动部件在运行时出现松动和摆动，从而引起电机的负载波动和振动。
3. **振动测试**打印电机波形。如果在电机运行时，振动值明显超标，尤其是在某一位置会稳定出现异常噪声，这可能是由于螺丝没拧紧导致的机械结构不稳定引起的。
4. **噪音检测**
听电机运行时的声音。如果出现异常的噪音，如敲击声、摩擦声等，可能是由于螺丝松动导致的部件之间的碰撞或摩擦引起的。
5. **逐步紧固螺丝**
在电机停机状态下，逐步紧固电机和相关机械部件的螺丝，然后重新启动电机，观察抖动情况是否有所改善。如果紧固螺丝后抖动明显减轻或消失，说明螺丝松动是导致电机抖动的主要原因。
6. **对比测试**
在紧固螺丝前，记录电机运行时的抖动情况和相关参数（如电流、电压等）。紧固螺丝后，再次记录这些参数，并进行对比分析。如果抖动情况明显改善，且参数趋于稳定，进一步证明螺丝松动是问题所在。
## 问题二：无法走线或没有布线空间
### 问题描述及原因
+ **电磁干扰增加**
布线空间不足会导致电源线、信号线和电机线等密集交错，增加电磁干扰的风险。例如，电机的电源线通常电流较大，如果与电控系统的信号线靠得太近，电源线产生的电磁场会干扰信号线传输的控制信号，导致信号失真。这种干扰会影响电控系统的正常运行，出现控制不精准、电机运行不稳定等问题。
+ **散热不良**
电控系统的电子元件在运行时会产生热量，如果走线空间不足，会导致线路密集，阻碍热量的散发。例如，在PCB板上，如果布线过于密集，热量无法有效散出，会使元件温度升高，加速元件老化，降低系统的可靠性和寿命。此外，散热不良还可能导致元件性能下降，甚至出现热关断等故障。
+ **线路损坏风险增加**
布线空间不足可能导致线路被挤压、拉扯或摩擦。例如，在机械结构中，如果电控线路被强行塞入狭小的空间，可能会导致线路外皮破损，暴露内部导线，增加短路和漏电的风险。这种线路损坏不仅会影响电控系统的正常运行，还可能导致安全事故。
+ **维护和检修困难**
布线空间不足会使电控系统的线路布置变得混乱，增加维护和检修的难度。例如，在需要更换或维修某个元件时，由于线路过于密集和复杂，维修人员难以快速找到故障点，延长维修时间，增加维修成本。此外，密集的线路还可能导致维修过程中误操作，进一步损坏其他元件。
+ **系统扩展和升级困难**
如果未来需要对电控系统进行扩展或升级，布线空间不足会成为一个严重的问题。例如，添加新的传感器或执行器需要额外的布线，但如果没有足够的空间，这些新增的线路将难以布置，限制系统的功能扩展和性能提升。
+ **走线体积过大**
为了在有限的空间内布置所有线路，可能需要使用更小的元件和更细的线路，这会增加设计和制造的复杂性。此外，如果布线空间不足导致设备内部结构过于紧凑，可能需要增加设备的外部尺寸来容纳这些线路，从而影响设备的整体设计和美观。
+ **环境因素影响增大**
布线空间不足可能导致线路暴露在不利的环境中，如潮湿、粉尘、盐雾等。例如，在户外设备中，如果电控线路没有足够的保护空间，可能会受到雨水、灰尘等环境因素的影响，导致线路腐蚀、短路等问题，降低设备的可靠性和寿命。
### 解决方法
1. **优化结构设计**
在结构设计阶段，让他合理规划电控系统的布线路径和空间，确保线路有足够的空间进行布置和固定。例如，可以采用模块化设计，将电控系统分为多个模块，每个模块都有独立的布线区域，避免线路交叉和混乱。
2. **使用布线槽和导管**
在结构中叫他设计专门的布线槽和导管，用于容纳和整理电控线路。布线槽和导管可以有效地将线路集中起来，减少线路占用的空间，同时也能对线路起到保护作用，防止线路被挤压、拉扯或损坏。
3. **预留空间和余量**
在结构设计时，你要叫他预留足够的空间和余量，以适应电控系统的布线需求。考虑到未来可能的系统升级和维护，预留一定的空间和余量可以为后续的工作提供便利。
4. **重新布线**
如果结构已经完成但布线空间不足，可以考虑重新布线。在重新布线时，尽量优化线路的布局，减少线路的交叉和冗余，使线路更加紧凑和合理。例如，可以将一些不常用的线路隐藏在结构的边缘或角落，以节省空间。
5. **使用更细的电线和电缆**
在满足电控系统性能要求的前提下，选择更细的电线和电缆，以减少线路占用的空间。但需要注意的是，电线和电缆的规格必须符合安全和性能标准，不能因为追求细小而影响系统的正常运行。
6. **增加固定点**
在结构中增加更多的固定点，用于固定电控线路。通过合理布置固定点，可以将线路更加紧密地固定在结构上，减少线路的晃动和移位，从而节省空间。
### 闲言碎语
其实结构设计的时候基本没几个能考虑电控走线的，所以你在结构设计车辆的时候就要经常去找他，让他给你留空间，尤其是分电板和电源管理周围，等到车辆出来后，前三个解决方法基本是不会再更改的了。
## 问题三：阻尼过大或阻尼不均匀
### 问题描述
+ **控制参数难以调整**
由于反馈信号的不准确，PID控制参数的调整会变得更加困难。在进行PID调节时，需要根据准确的反馈信号来调整比例、积分、微分参数，以达到最佳的控制效果。如果反馈信号存在误差，会导致控制参数的调整方向和幅度不准确，无法找到合适的参数组合
+ **机械振动加剧**
阻尼过大或不均匀会导致机械结构的振动加剧，这种振动会传递到电控系统，影响传感器的测量精度和电控系统的稳定性。例如，在电机控制系统中，振动可能导致编码器的测量信号出现波动，影响电机的控制精度
+ **振荡和不稳定**
阻尼过大或不均匀会使整个控制系统变得更加脆弱，容易受到外界干扰的影响，导致系统稳定性降低，出现控制不稳定、振荡加剧等问题。
+ **响应速度变慢**
阻尼过大可能会使系统对输入信号的响应变慢，导致控制系统的响应速度降低，影响设备的动态性能，响应慢=没自瞄
### 解决方法
1. **赶快找结构！！！**
这个纯结构问题，越早发现越好，直接和结构组组长说，这个问题也挺难解决的
2. **尝试增大PID的值**
如果单纯是阻尼过大的话，可以尝试增大PID的值，电机一定会存在一个异常噪声，但是只要不是高频抖动就能用（仅限于时间不够才准使用此方法），这个方法对电机伤害极大
3. **前馈PID**
用前馈PID控制可以在一定程度上缓解阻尼不均匀对系统性能的影响，但不能完全解决该问题，并且有很大局限性。前馈控制的效果依赖于对系统模型的精确掌握。如果阻尼不均匀的情况复杂且难以建模，前馈控制可能无法准确补偿。前馈控制通常针对特定的系统特性进行设计，当阻尼不均匀的情况发生变化时，可能需要重新调整前馈控制参数，否则其补偿效果会下降。

## 未完待续
以上是我目前能想到结构组对电控调车所产生的影响，后续如果有想法将会不定期补充，也期待看文档的你有所补充